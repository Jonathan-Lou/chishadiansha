<!--index.wxml-->
<view class="mask" wx:if="{{visible}}" bindtap="onClose">
  <view class="modal" catchtap="preventDefault">
    <view class="modal-header">
      <text class="title">{{pageType === 'edit' ? '编辑菜品' : '添加菜品'}}</text>
      <view class="close" bindtap="onClose">×</view>
    </view>
    
    <view class="modal-content">
      <view class="photo" bind:tap="takePhoto">
        <view wx:if="{{!photoSrc}}" class="takePhoto">
          <text>点击上传图片</text>
        </view>
        <image 
          wx:else 
          class="photoImg" 
          mode="aspectFit" 
          src="{{photoSrc}}"
        />
      </view>

      <form catchsubmit="formSubmit">
        <view class="form-item">
          <text class="label">菜品名称</text>
          <input 
            class="input" 
            name="name" 
            placeholder="输入菜品名称" 
            value="{{dishData.name}}"
          />
        </view>

        <view class="form-item">
          <text class="label">菜品类型</text>
          <input 
            class="input" 
            name="type" 
            placeholder="输入菜品类型(如:蔬菜、荤菜等)" 
            value="{{dishData.type}}"
          />
        </view>

        <view class="form-item">
          <text class="label">备注</text>
          <textarea 
            class="textarea" 
            name="remark" 
            placeholder="输入备注信息（可选）" 
            value="{{dishData.remark}}"
          />
        </view>

        <button 
          class="submit-btn {{isUploading ? 'disabled' : ''}}"
          formType="submit"
          disabled="{{isUploading}}"
        >
          {{isUploading ? '保存中...' : '确认'}}
        </button>
      </form>
    </view>
  </view>
</view>